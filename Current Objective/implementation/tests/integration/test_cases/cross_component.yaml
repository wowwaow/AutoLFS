id: CROSS_TEST_001
name: Cross-Component Integration Test
category: CROSS_COMPONENT
description: |
  Validates interactions between LFS and BLFS components, including shared
  resource management, state handling, and error recovery.

prerequisites:
  - file:/mnt/lfs/tools
  - file:/mnt/blfs/packages
  - command:gcc
  - command:make

steps:
  - name: Environment Setup
    script: setup_cross_env.sh
    
  - name: Create Shared Resources
    script: create_shared_resources.sh
    
  - name: Configure Components
    script: configure_components.sh
    
  - name: Execute LFS Build
    script: build_lfs_component.sh
    
  - name: Execute BLFS Build
    script: build_blfs_component.sh
    
  - name: Test Integration
    script: test_integration.sh

validation_steps:
  - name: Verify LFS Build
    type: build
    phase: SYSTEM
    
  - name: Verify BLFS State
    type: build
    phase: BLFS
    
  - name: Verify System State
    type: system
    
  - name: Verify Performance
    type: performance
    
  - name: Create Integration Checkpoint
    script: create_checkpoint.sh
    
  - name: Verify Checkpoint
    type: checkpoint
    checkpoint_id: cross_test_001

cleanup_steps:
  - name: Clean LFS Components
    script: clean_lfs.sh
    
  - name: Clean BLFS Components
    script: clean_blfs.sh
    
  - name: Remove Shared Resources
    script: remove_shared_resources.sh

expected_results:
  file:/usr/local/cross/bin/test-tool:
    exists: true
  command:/usr/local/cross/bin/test-tool --check:
    exit_code: "0"
    output: "Integration test passed"
  file:/var/log/cross-test.log:
    exists: true
    content: "Components integrated successfully"

