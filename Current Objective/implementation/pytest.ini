[pytest]
# Test Discovery Patterns
testpaths = 
    tests/lfs_wrapper/unit
    tests/lfs_wrapper
    tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Test Categories and Markers
markers =
    # Test Categories
    unit: Unit tests for individual components
    integration: Integration tests between components
    validation: System validation tests
    performance: Performance and benchmark tests
    security: Security and vulnerability tests
    
    # Test Types
    config: Configuration management tests
    error: Error handling and recovery tests
    async: Tests requiring async execution
    dependency: Tests with specific dependencies
    cleanup: Tests requiring resource cleanup
    
    # Component Markers
    core: Core functionality tests
    build: Build system tests
    wrapper: Wrapper system tests
    blfs: BLFS-specific tests
    lfs: LFS-specific tests

# Logging Configuration
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s (%(filename)s:%(lineno)s)
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Asyncio Configuration
asyncio_mode = auto
asyncio_default_fixture_loop_scope = function
asyncio_fixture_scope = function

# Test Execution Options
addopts = 
    # Enable verbose output
    -v
    # Show local variables in tracebacks
    --showlocals
    # Generate HTML test report
    --html=test-reports/report.html
    # Generate test coverage report
    --cov=lfs_wrapper
    --cov-report=html:test-reports/coverage
    --cov-report=term-missing
    # Parallel test execution
    -n auto
    # Show slowest tests
    --durations=10
    # Fail on warnings
    -W error

# Plugin Configurations
[coverage:run]
branch = True
source = lfs_wrapper

[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    raise NotImplementedError
    if __name__ == .__main__.:
    pass
    raise AssertionError

[coverage:html]
directory = test-reports/coverage

# Environment Configuration
[environment]
test_tmp_path = /tmp/lfs_test
test_build_path = /tmp/lfs_test/build
test_source_path = /tmp/lfs_test/sources
test_log_path = /tmp/lfs_test/logs
